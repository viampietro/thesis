\RequirePackage{setspace}
\RequirePackage{xcolor}
\RequirePackage[outline]{contour}

\makeatletter
  
\def\@directorA{\textless{}Directeur\textgreater}
  \newcommand{\directorA}[1]{\gdef\@directorA{#1}}
\def\@directorB{\textless{}Directeur\textgreater}
  \newcommand{\directorB}[1]{\gdef\@directorB{#1}}
  
  
\def\@universite{\textless{}Universit\'e\textgreater}
  \newcommand{\universite}[1]{\gdef\@universite{#1}}
\def\@researchunit{\textless{}Unit\'e de recherche\textgreater}
  \newcommand{\researchunit}[1]{\gdef\@researchunit{#1}}
\def\@specialisation{\textless{}Sp\'ecialit\'e\textgreater}
  \newcommand{\specialisation}[1]{\gdef\@specialisation{#1}}
  
\def\@doctoral{\textless{} \'Ecole doctorale\textgreater}
  \newcommand{\doctoral}[1]{\gdef\@doctoral{#1}}
  
\newcommand{\titletimestamp}{\gdef\@titletimestamp}

\def\@myquote{\textless{} \MBOX{}.}
\newcommand{\myquote}[1]{\gdef\@myquote{#1}}

\def\@univlogo{Figures/logo_UM.png}
\newcommand{\univlogo}[1]{\gdef\@univlogo{#1}}

\def\@univwallpaper{Figures/wallpaper.png}
\newcommand{\univwallpaper}[1]{\gdef\@univwallpaper{#1}}

\def\@jury{}
\newcommand{\jury}[4]{\expandafter\def\expandafter\@jury\expandafter{\@jury{}\vspace{0.15cm} #1, #2, #3 & \hspace{0.1cm} & #4 \\ }}

\def\@titlefootnote{}
\newcommand{\titlefootnote}[1]{\gdef\@titlefootnote{#1}}

\definecolor{rougefonce}{rgb}{0.91, 0.31, 0.32}
\definecolor{grisdegueulasse}{rgb}{0.53, 0.55, 0.63}
\contourlength{0.1pt}

\renewcommand{\maketitle}
%\def\arraystretch{1.8}
{
  \begin{titlepage}

  \onehalfspacing
  \begin{tikzpicture}[remember picture, overlay]

	% Définit des coordonnées de base
    \coordinate[xshift=0cm] (vcenter) at (current page.north) {};
    \coordinate[xshift=6cm] (shadewidth) at (current page.north west) {};
    \coordinate[xshift=6cm] (shadecorner) at (current page.south west) {};
    
    % Inclure le logo
    \node[anchor=north west,yshift=0.2cm, xshift=-0.2cm] at (current page.north west) {\includegraphics[width=21cm]{\@univwallpaper}};
    \node[yshift=-26.5cm] at (vcenter) {\includegraphics[width=7.2cm]{\@univlogo}};
    
    % Texte 
    \node[yshift=-2.6cm] at (vcenter) {\fontsize{15}{15}\selectfont {\bf {\color{rougefonce}\contour{rougefonce}{TH\`ESE POUR OBTENIR LE GRADE DE DOCTEUR}}}};
    \node[yshift=-3.5cm] at (vcenter) {\fontsize{15}{15} {\bf {\color{rougefonce}\contour{rougefonce}{DE L'\@universite}}}};

    \node[yshift=-4.9cm] at (vcenter) {\fontsize{12}{12} {\bf En \@specialisation}};    
    \node[yshift=-5.9cm] at (vcenter) {\fontsize{12}{12} {\bf \'Ecole doctorale \@doctoral}};
    \node[yshift=-6.9cm] at (vcenter) {\fontsize{12}{12} {\bf Unit\'e de recherche \@researchunit}};

    \node[yshift=-9cm,inner sep=20pt] at (vcenter) {\fontsize{17}{17} {\bf {\color{grisdegueulasse}\contour{grisdegueulasse}{ \@title}}}};        
        
        
    % -9.5cm
    % -11cm
    \node[yshift=-12.8cm] at (vcenter) {\fontsize{14}{14} {\bf Pr\'esent\'e par \@author}};
    \node[yshift=-13.5cm] at (vcenter) {\fontsize{14}{14} {\bf Le \@date{}}};
    
    \node[yshift=-14.7cm] at (vcenter) {\fontsize{13}{13} {\bf Sous la direction de \@directorA}};
    %direction-2
    \node[yshift=-15.2cm] at (vcenter) {\fontsize{13}{13} {\bf et \@directorB}};
    
    
    \node[yshift=-17cm] at (vcenter) {\fontsize{12}{12} {\bf Devant le jury compos\'e de }};
    \node[anchor=north,yshift=-17.6cm] at (vcenter) {{\fontsize{10}{10}\selectfont {\bf 
      \begin{tabular}{lcl}
        \@jury
      \end{tabular}
  }}};
  \node[yshift=-27.2cm,xshift=-4.29cm] at (vcenter) {\small %
     %Jury pr\'esid\'e par ??? ???
    };

  \end{tikzpicture}
  \singlespacing
  \end{titlepage}
 % \cleardoublepage
}
