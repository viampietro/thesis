% New math symbols.

% Defining simple hyphen for math mode.

\mathchardef\mhyphen="2D

% Typing relation with flag.

\newcommand{\tflag}[1]{\mathop{:}\limits_{}^{#1}}

% Overriding union operator.
\newcommand{\ocup}{\mathop{\cup}\limits_{}^{\leftarrow}}

% Differentiated intersection domain.
\newcommand{\dcap}{\mathop{\cap}\limits_{}^{\neq}}

% Concat operator
\newcommand\doubleplus{+\kern-1.3ex+\kern0.8ex}
\newcommand\mdoubleplus{\ensuremath{\mathbin{+\mkern-9mu+}}}

\newcommand\steq{
  \mathrel{\stackrel{\makebox[0pt]{\mbox{\normalfont\tiny\sffamily state}}}{=}}}

\newcommand\lassign[1]{
\mathrel{\stackrel{\makebox[0pt]{\mbox{\normalfont\tiny\sffamily #1}}}{:=}}}

\newcommand\rlabelledarrow[1]{
\mathrel{\stackon[2pt]{$\rightarrow$}{\scriptsize $#1$}}}

\newcommand\srsquigarrow[2]{%
  \mathrel{%
    \begin{tikzpicture}[%
      baseline={(current bounding box.south)}
      ]
      \node[%
      ,inner sep=1ex
      ,align=center
      ] (tmp) {#2 $#1$};
      
      \path[%
      ,draw,<-
      ,decorate,decoration={%
        ,zigzag
        ,amplitude=0.7pt
        ,segment length=1.2mm,pre length=3.5pt}
      ] 
      ($(tmp.south east)-(3pt,0)$) -- ($(tmp.south west)+(3pt,0)$);
    \end{tikzpicture}
  }
}

\newcommand\xrsquigarrow[1]{%
  \mathrel{%
    \begin{tikzpicture}[%
      baseline={(current bounding box.south)}
      ]
      \node[%
      ,inner sep=1ex
      ,align=center
      ] (tmp) {\scriptsize $#1$};
      
      \path[%
      ,draw,<-
      ,decorate,decoration={%
        ,zigzag
        ,amplitude=0.7pt
        ,segment length=1.2mm,pre length=3.5pt}
      ] 
      ($(tmp.south east)-(3pt,0)$) -- ($(tmp.south west)+(3pt,0)$);
    \end{tikzpicture}
  }
}

\newcommand\xlsquigarrow[1]{%
  \mathrel{%
    \begin{tikzpicture}[%
      ,baseline={(current bounding box.south)}
      ]
      \node[%
      ,inner sep=.44ex
      ,align=center
      ] (tmp) {\scriptstyle $#1$};
      \path[%
      ,draw,<-
      ,decorate,decoration={%
        ,zigzag
        ,amplitude=0.7pt
        ,segment length=1.2mm,pre length=3.5pt
      }
      ] 
      (tmp.south west) -- (tmp.south east);
    \end{tikzpicture}
  }
}

\newcommand\srarrow[2]{%
  \mathrel{%
    \begin{tikzpicture}[%
      baseline={(current bounding box.south)}
      ]
      \node[%
      ,inner sep=1ex
      ,align=center
      ] (tmp) {#2 $#1$};
      \path[%
      ,draw,<-,] 
      ($(tmp.south east)+(0,2pt)$) -- ($(tmp.south west)+(3pt,2pt)$);
    \end{tikzpicture}
  }
}

% NEW MATH ENVIRONMENTS

\newtheorem{definition}{Definition}
\newtheorem{notation}{Notation}
\newtheorem{thm}{Theorem}
\newtheorem{remark}{Remark}
\newtheorem{hypothesis}{Hypothesis}
\newtheorem{lemma}{Lemma}
\newtheorem{proposition}{Proposition}

\makeatletter
\newcommand*{\inlineequation}[2][]{%
  \begingroup
    % Put \refstepcounter at the beginning, because
    % package `hyperref' sets the anchor here.
    \refstepcounter{equation}%
    \ifx\\#1\\%
    \else
      \label{#1}%
    \fi
    % prevent line breaks inside equation
    \relpenalty=10000 %
    \binoppenalty=10000 %
    \ensuremath{%
      % \displaystyle % larger fractions, ...
      #2%
    }%
    ~\@eqnnum
  \endgroup
}
\makeatother