In this esction, we will demonstrate the full simulation of a \hvhdl{}
top-level design on the example of Listing~\ref{lst:tl-design-ex}. The
aim here is to illustrate the formal rules of the \hvhdl{}
semantics. Listing~\ref{lst:tl-design-ex} is the result of the
transformation of the SITPN model presented in Figure into a \hvhdl{}
design. To keep the examples within a reasonable size,
Listing~\ref{lst:tl-design-ex}, and the other listings and derivation
trees used in this section, refer to the generic constants and ports
of the transition and place designs by their short names. See
Table~\ref{tab:consts-and-sigs-ref} for a correspondence between the
short names and the full names of constants and signals of the place
and transition designs.

\begin{lstlisting}[language=VHDL,label={lst:tl-design-ex},
caption={[An example of \hvhdl{} design generated by \hilecop{}.] An example of \hvhdl{} top-level design generated by the \hilecop{} transformation.},framexleftmargin=1.5em,xleftmargin=2em,numbers=left,
numberstyle=\tiny\ttfamily]
design toplevel toplevel_architecture

-- Generic constants
$\emptyset$

-- Ports
((in, $id_{c0}$, boolean), (out, $id_{f0}$, boolean), (out, $id_{a0}$, boolean))

-- Declared (internal) signals
(($id_{ft}$, boolean), ($id_{av}$, boolean), ($id_{rt}$, boolean),($id_m$, boolean))

-- Behavior

-- Place component instance $id_p$
comp ($id_p$, place,
-- Generic map
((ian, 1), (oan, 1), (mm, 1)),

-- Input port map
((im, 1), (iaw(0), 1), (oat(0), 0), (oaw(0), 1), (itf(0), $id_{ft}$), (otf(0), $id_{ft}$))

-- Output port map
((oav(0), $id_{av}$), (pauths, open), (rtt(0), $id_{rt}$), (marked, $id_m$)))

||

-- Transition component instance $id_t$
comp ($id_t$, transition,
-- Generic map
((tt, 0), (ian, 1), (cn, 1)),

-- Input port map
((ic(0), $id_{c0}$), (A, 0), (B, 0), (iav(0), $id_{av}$), (rt(0), $id_{rt}$), (pauths(0), true)),

-- Output port map
((fired, $id_{ft}$)))

||

-- The marked process
process (marked, {clk}, $\emptyset$,
(rst ($id_{a0}$ <= false)
     (falling ($id_{a0}$ <= $id_m$ or false))))

||

-- The fired process
process (fired, {clk}, $\emptyset$,
(rst ($id_{f0}$ <= false)
     (rising ($id_{f0}$ <= $id_{ft}$ or false))))
\end{lstlisting}

\begin{figure}[H]
  \centering
  \includegraphics[keepaspectratio,width=.15\textwidth]{Figures/H-VHDL/sitpn-ex-full-sim}
  \caption[An SITPN model transformed into a \hvhdl{} top-level design.]{The SITPN model at the base of the generation of the top-level design presented in Listing~\ref{lst:tl-design-ex}.}
  \label{fig:sitpn-ex-full-sim}
\end{figure}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../main"
%%% End:
